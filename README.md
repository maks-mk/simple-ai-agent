# ü§ñ Autonomous AI Agent (LangGraph + MCP + Rich UI)

**v4.7b**

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π **AI-–∞–≥–µ–Ω—Ç** –Ω–∞ –±–∞–∑–µ **LangGraph** –∏ **Model Context Protocol (MCP)**.
–ê–≥–µ–Ω—Ç —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –∑–∞–¥–∞—á, –æ–±–ª–∞–¥–∞—è –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ **—Å–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** –ø—Ä–∏ —Å–±–æ—è—Ö API, –∑–∞—â–∏—Ç–æ–π –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è –∏ "—É–º–Ω—ã–º" —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏.

–†–∞–±–æ—Ç–∞–µ—Ç –≤ –∫—Ä–∞—Å–∏–≤–æ–º **CLI** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–µ–π, —Ç—Ä–µ–∫–∏–Ω–≥–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤ (—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞) –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —à–∏—Ä–æ–∫–æ–≥–æ —Å–ø–µ–∫—Ç—Ä–∞ –º–æ–¥–µ–ª–µ–π (–æ—Ç GPT-4o –¥–æ Gemini Flash Lite).

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üõ°Ô∏è –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç (Resilience)
- **Self-Healing Core:** –ê–≥–µ–Ω—Ç –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö —Å–±–æ—è—Ö –∏–ª–∏ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö LLM. –í—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ **Self-Correction**: –µ—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç—Ä–∞–±–æ—Ç–∞–ª, –Ω–æ –º–æ–¥–µ–ª—å "—É–ø–∞–ª–∞" –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞, –∞–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —à–∞–≥ —Å —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–æ–π, —Å–æ—Ö—Ä–∞–Ω—è—è –∫–æ–Ω—Ç–µ–∫—Å—Ç.
- **Loop Guard:** –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è. –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –≤ –ø–∞–Ω–∏–∫–µ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥, –∞–≥–µ–Ω—Ç –º—è–≥–∫–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –µ—ë.
- **Smart Path Sanitization:** –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —á–∏—Å—Ç–∫–∞ –ø—É—Ç–µ–π –æ—Ç –º—É—Å–æ—Ä–∞ (–∫–∞–≤—ã—á–∫–∏, –¥–≤–æ–µ—Ç–æ—á–∏—è), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ —Å "–≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É—é—â–∏–º–∏" –º–æ–¥–µ–ª—è–º–∏.

### üîå –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ü–æ–∏—Å–∫
- **Smart Search Routing:** –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø–æ–∏—Å–∫–∞:
    - **`web_search`**: –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ñ–∞–∫—Ç–æ–≤ ("–∫—É—Ä—Å –¥–æ–ª–ª–∞—Ä–∞").
    - **`batch_web_search`**: –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á. –ó–∞–ø—É—Å–∫–∞–µ—Ç **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (–¥–æ 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ), –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è—è —Å–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
- **Batch Fetching:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `fetch_content` —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–ø–∏—Å–æ–∫ URL –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –ø–∞—á–∫–æ–π –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å.
- **Quality Gate:** –ê–≥–µ–Ω—Ç –Ω–µ —Ä–∞–∑—Ä–µ—à–∏—Ç –∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª, –µ—Å–ª–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –∏–ª–∏ —á—Ç–µ–Ω–∏–µ.
- **Long-Term Memory:** –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å (ChromaDB) —Å –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π (Lazy Loading).

### üíª –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π CLI (UI/UX)
- **Transient UI:** –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è **—Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º** –≤–Ω—É—Ç—Ä–∏ —Å–ø–∏–Ω–Ω–µ—Ä–∞ –≤ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–æ **–Ω–µ –∑–∞—Å–æ—Ä—è—é—Ç** –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
- **Token Diagnostics:** –í –∫–æ–Ω—Ü–µ —à–∞–≥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–¥—Å—á–µ—Ç–∞:
    - `(Provider)` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ—Ç API.
    - `(Manual)` ‚Äî —Ä—É—á–Ω–æ–π –ø–æ–¥—Å—á–µ—Ç (–¥–ª—è –º–æ–¥–µ–ª–µ–π –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ usage).
- **Clean History:** –õ–æ–≥ –æ—Å—Ç–∞–µ—Ç—Å—è —á–∏—Å—Ç—ã–º, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (`‚úÖ Found 5 results`).

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–¢—Ä–µ–±—É–µ—Ç—Å—è **Python 3.10+**.

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ venv
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è:
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate
```

### 2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`.

```ini
# --- –í–´–ë–û–† –ü–†–û–í–ê–ô–î–ï–†–ê ---
# provider: gemini | openai
PROVIDER=openai

# --- API KEYS ---
# –î–ª—è OpenAI / OpenRouter / DeepSeek / MegaLLM
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4o-mini
# OPENAI_BASE_URL=https://openrouter.ai/api/v1 

# –î–ª—è Gemini
GEMINI_API_KEY=AIzaSy...
GEMINI_MODEL=gemini-1.5-flash

# --- –ü–û–ò–°–ö (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) ---
# –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á: https://tavily.com
TAVILY_API_KEY=tvly-...

# –í–∫–ª—é—á–∏—Ç—å –≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ (–¥–æ—Ä–æ–≥–æ–π –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º)?
DEEP_SEARCH=false

# --- –ù–ê–°–¢–†–û–ô–ö–ò –ê–ì–ï–ù–¢–ê ---

# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ –º–æ–¥–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Tools)?
# true  - –ê–≥–µ–Ω—Ç–Ω—ã–π —Ä–µ–∂–∏–º (GPT-4, Gemini, Claude 3.5)
# false - –†–µ–∂–∏–º Chat-Only (–¥–ª—è o1-preview, Llama-3-8b –∏ –ø—Ä–æ—Å—Ç—ã—Ö –º–æ–¥–µ–ª–µ–π)
MODEL_SUPPORTS_TOOLS=true

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ —à–∞–≥–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
MAX_LOOPS=15

# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (0.2 - 0.3 –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤)
TEMPERATURE=0.3

# --- –ü–ê–ú–Ø–¢–¨ ---
# –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (ChromaDB)
LONG_TERM_MEMORY=true

# –†–∞–∑–º–µ—Ä —Å–µ—Å—Å–∏–∏ (–∫–æ–ª-–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π) –ø–µ—Ä–µ–¥ —Å–∂–∞—Ç–∏–µ–º
SESSION_SIZE=25
# –°–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏
SUMMARY_KEEP_LAST=6
```

---

## üèÉ‚Äç‚ôÇÔ∏è –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```bash
python agent_cli.py
```

**–ö–æ–º–∞–Ω–¥—ã –≤–Ω—É—Ç—Ä–∏ —á–∞—Ç–∞:**
- `exit` / `quit` ‚Äî –í—ã—Ö–æ–¥.
- `reset` / `clear` ‚Äî –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é (—Å–±—Ä–æ—Å –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞).
- `Alt + Enter` ‚Äî –ü–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ (–º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π –≤–≤–æ–¥).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `agent.py` | **Core.** –ì—Ä–∞—Ñ LangGraph, –ª–æ–≥–∏–∫–∞ Retry, Loop Guard, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. |
| `agent_cli.py` | **UI.** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ `rich`. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞, "–∏—Å—á–µ–∑–∞—é—â–∏–µ" –∞—Ä–≥—É–º–µ–Ω—Ç—ã, —Ç—Ä–µ–∫–∏–Ω–≥ —Ç–æ–∫–µ–Ω–æ–≤. |
| `search_tools.py` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Tavily AI**. –í–∫–ª—é—á–∞–µ—Ç `web_search` (single), `batch_web_search` (parallel) –∏ `fetch_content`. |
| `delete_tools.py` | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—É–¥–∞–ª–µ–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—É—Ç–µ–π). |
| `memory_manager.py` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RAG-–ø–∞–º—è—Ç—å—é (ChromaDB + SentenceTransformers). |
| `logging_config.py` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∏—Å—Ç–æ—Ç—ã –ª–æ–≥–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —à—É–º–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫). |
| `mcp.json` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (Model Context Protocol). |