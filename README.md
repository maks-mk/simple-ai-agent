# ü§ñ Autonomous AI Agent (LangGraph + MCP + Rich UI)

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π **AI-–∞–≥–µ–Ω—Ç** –Ω–∞ –±–∞–∑–µ **LangGraph** –∏ **Model Context Protocol (MCP)**.
–ê–≥–µ–Ω—Ç —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –∑–∞–¥–∞—á —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–ü–æ–∏—Å–∫, –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, –ü–∞–º—è—Ç—å), –æ–±–ª–∞–¥–∞—è –ø—Ä–∏ —ç—Ç–æ–º –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ —Å–∞–º–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å—é –∫ –æ—à–∏–±–∫–∞–º –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –ø–æ—Ç–æ–∫–æ–≤—ã–º –≤—ã–≤–æ–¥–æ–º.

–†–∞–±–æ—Ç–∞–µ—Ç –≤ –∫—Ä–∞—Å–∏–≤–æ–º **CLI** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–µ–π, —Ç—Ä–µ–∫–∏–Ω–≥–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞–∫ –º–æ—â–Ω—ã—Ö (GPT-4o, Claude 3.5), —Ç–∞–∫ –∏ –ø—Ä–æ—Å—Ç—ã—Ö –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (v4.5)
- **Refactored Core:** –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (SRP) —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Ä–µ–µ—Å—Ç—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —É—Ç–∏–ª–∏—Ç—ã –∏ –ª–æ–≥–∏–∫—É –≥—Ä–∞—Ñ–∞.
- **Smart Path Handling:** –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Ç–µ–π. –ê–≥–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ (Windows/Linux) –∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≤—ã—Ö–æ–¥–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`..`), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—è –æ—à–∏–±–∫–∏ –º–æ–¥–µ–ª–∏.
- **Model Agnostic:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–∞ **Chat-Only** –¥–ª—è –º–æ–¥–µ–ª–µ–π, –Ω–µ —É–º–µ—é—â–∏—Ö –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `o1-preview` –∏–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ OpenRouter).
- **Quality Gate:** –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π ‚Äî –∞–≥–µ–Ω—Ç –Ω–µ –∑–∞–ø–∏—à–µ—Ç —Ñ–∞–π–ª, –µ—Å–ª–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–µ –ø–æ–ª—É—á–∏–ª –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –∏–ª–∏ —á—Ç–µ–Ω–∏–µ.

### üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –ü–æ–∏—Å–∫
- **Unified Fetching:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `fetch_content` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –ø–µ—Ä–µ–¥–∞–Ω–∞ –æ–¥–Ω–∞ —Å—Å—ã–ª–∫–∞ –∏–ª–∏ —Å–ø–∏—Å–æ–∫, –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Batching** (–¥–æ 20 URL –∑–∞ —Ä–∞–∑) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –≤ —Ä–∞–∑—ã.
- **Deep Search:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Tavily Advanced) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏.
- **Auto-Retry:** –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ LLM –∏ Search API –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö —Å–±–æ—è—Ö.

### üîå –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **Professional Search (Tavily AI):** –ü–æ–∏—Å–∫ –±–µ–∑ –∫–∞–ø—á –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
- **File System:** –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—á—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å, —É–¥–∞–ª–µ–Ω–∏–µ).
- **MCP Support:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç Model Context Protocol (`mcp.json`).
- **Memory:** –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å (ChromaDB) –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ñ–∞–∫—Ç–æ–≤.

### üíª –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π CLI (UI/UX)
- **–¢–æ—á–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ —Ç–æ–∫–µ–Ω–æ–≤:** –°—É–º–º–∏—Ä—É–µ—Ç Input/Output —Ç–æ–∫–µ–Ω—ã.
- **Checklist UI:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (‚úÖ/‚ùå).
- **Clean Markdown:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ª–∏—à–Ω–∏—Ö –æ—Ç—Å—Ç—É–ø–æ–≤ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–∞–±–ª–∏—Ü –∏ —Å–ø–∏—Å–∫–æ–≤.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–¢—Ä–µ–±—É–µ—Ç—Å—è **Python 3.10+**.

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ venv
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è:
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate
```

### 2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`.
**–í–∞–∂–Ω–æ:** –î–ª—è –ø–æ–∏—Å–∫–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–ª—é—á Tavily.

```ini
# --- –í–´–ë–û–† –ü–†–û–í–ê–ô–î–ï–†–ê ---
# provider: gemini | openai
PROVIDER=openai

# --- API KEYS ---
# –î–ª—è OpenAI / OpenRouter / DeepSeek
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4o
OPENAI_BASE_URL=https://api.openai.com/v1

# –î–ª—è Gemini
GEMINI_API_KEY=AIzaSy...
GEMINI_MODEL=gemini-1.5-flash

# --- –ü–û–ò–°–ö (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) ---
# –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á: https://tavily.com
TAVILY_API_KEY=tvly-...

# –í–∫–ª—é—á–∏—Ç—å –≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ (–¥–æ—Ä–æ–≥–æ–π –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º)?
# true - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç deep_search
# false - —ç–∫–æ–Ω–æ–º–∏—Ç –∫—Ä–µ–¥–∏—Ç—ã
DEEP_SEARCH=true

# --- –ù–ê–°–¢–†–û–ô–ö–ò –ê–ì–ï–ù–¢–ê ---

# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ –º–æ–¥–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Tools)?
# true  - –¥–ª—è GPT-4, Claude 3.5, Gemini (–ê–≥–µ–Ω—Ç–Ω—ã–π —Ä–µ–∂–∏–º)
# false - –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –º–æ–¥–µ–ª–µ–π (Llama-3-8b, o1-preview), –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º Chat-Only
MODEL_SUPPORTS_TOOLS=true

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ —à–∞–≥–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
MAX_LOOPS=25

# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (0.0 - —Ç–æ—á–Ω–æ—Å—Ç—å, 1.0 - –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å)
TEMPERATURE=0.2

# --- –ü–ê–ú–Ø–¢–¨ –ò –ö–û–ù–¢–ï–ö–°–¢ ---
# –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–∫–æ–ª-–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π) –ø–µ—Ä–µ–¥ —Å–∂–∞—Ç–∏–µ–º.
SESSION_SIZE=40

# –°–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Å—Ç–∞–≤–ª—è—Ç—å –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏ –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏.
SUMMARY_KEEP_LAST=5

# –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (ChromaDB) - true/false
LONG_TERM_MEMORY=false
```

---

## üèÉ‚Äç‚ôÇÔ∏è –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```bash
python agent_cli.py
```

**–ö–æ–º–∞–Ω–¥—ã –≤–Ω—É—Ç—Ä–∏ —á–∞—Ç–∞:**
- `exit` / `quit` ‚Äî –í—ã—Ö–æ–¥.
- `reset` / `clear` ‚Äî –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é (—Å–±—Ä–æ—Å –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏).
- `Alt + Enter` ‚Äî –ü–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ (–º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π –≤–≤–æ–¥).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `agent.py` | **Core.** –õ–æ–≥–∏–∫–∞ –≥—Ä–∞—Ñ–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Ä–µ–µ—Å—Ç—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π `AgentUtils`. |
| `agent_cli.py` | **UI.** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ `rich` —Å –∫–ª–∞—Å—Å–æ–º `StreamProcessor` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞. |
| `search_tools.py` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Tavily AI**. –°–æ–¥–µ—Ä–∂–∏—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `fetch_content` (Batching) –∏ `web_search`. |
| `delete_tools.py` | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—É–¥–∞–ª–µ–Ω–∏–µ). |
| `memory_manager.py` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RAG-–ø–∞–º—è—Ç—å—é (ChromaDB + SentenceTransformers). |
| `mcp.json` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ (Filesystem –∏ –¥—Ä.). |
| `logging_config.py` | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤ (—Å–∫—Ä—ã–≤–∞–µ—Ç —à—É–º –±–∏–±–ª–∏–æ—Ç–µ–∫). |
